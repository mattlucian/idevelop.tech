version: 2
updates:
  # Root workspace dependencies
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "automated"
    commit-message:
      prefix: "chore"
      include: "scope"
    groups:
      # Group AWS SDK updates together
      aws-sdk:
        patterns:
          - "aws-*"
          - "@aws-sdk/*"
      # Group SST updates together
      sst:
        patterns:
          - "sst"
          - "@sst/*"
      # Group development dependencies
      dev-dependencies:
        dependency-type: "development"
        update-types:
          - "minor"
          - "patch"

  # Frontend package dependencies
  - package-ecosystem: "npm"
    directory: "/packages/web"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "frontend"
      - "automated"
    commit-message:
      prefix: "chore(web)"
      include: "scope"
    groups:
      # Group Vue ecosystem updates
      vue:
        patterns:
          - "vue"
          - "vue-*"
          - "@vue/*"
      # Group Vite and build tools
      build-tools:
        patterns:
          - "vite"
          - "vite-*"
          - "@vitejs/*"
      # Group dev dependencies
      dev-dependencies:
        dependency-type: "development"
        update-types:
          - "minor"
          - "patch"

  # Backend functions dependencies
  - package-ecosystem: "npm"
    directory: "/packages/functions"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "backend"
      - "automated"
    commit-message:
      prefix: "chore(functions)"
      include: "scope"

  # Core shared package dependencies
  - package-ecosystem: "npm"
    directory: "/packages/core"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "core"
      - "automated"
    commit-message:
      prefix: "chore(core)"
      include: "scope"

  # GitHub Actions workflow dependencies
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "github-actions"
      - "automated"
    commit-message:
      prefix: "chore(ci)"
